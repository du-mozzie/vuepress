(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{639:function(s,e,a){"use strict";a.r(e);var t=a(5),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"安装redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装redis"}},[s._v("#")]),s._v(" 安装Redis")]),s._v(" "),a("p",[s._v("通过"),a("code",[s._v("docker search redis")]),s._v("和"),a("code",[s._v("docker pull redis")]),s._v("下载redis镜像")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过关键词搜索可用的redis镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" search redis\nNAME                             DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\nredis                            Redis is an "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" key-value store that…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8297")]),s._v("                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nbitnami/redis                    Bitnami Redis Docker Image                      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("148")]),s._v("                                     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nsameersbn/redis                                                                  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ngrokzen/redis-cluster            Redis cluster "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.0")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("68")]),s._v("\nrediscommander/redis-commander   Alpine image "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" redis-commander - Redis man…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41")]),s._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nkubeguide/redis-master           redis-master with "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello World!"')]),s._v("                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v("\nredislabs/redis                  Clustered in-memory database engine compatib…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("\nredislabs/redisearch             Redis With the RedisSearch module pre-loaded…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v("\noliver006/redis_exporter          Prometheus Exporter "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Redis Metrics. Supp…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\narm32v7/redis                    Redis is an "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" key-value store that…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("\nbitnami/redis-sentinel           Bitnami Docker Image "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Redis Sentinel         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nwebhippie/redis                  Docker images "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Redis                         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nredislabs/redisgraph             A graph database module "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Redis               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ns7anley/redis-sentinel-docker    Redis Sentinel                                  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\narm64v8/redis                    Redis is an "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" key-value store that…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("\ninsready/redis-stat              Docker image "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the real-time Redis monitor…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("                                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nredislabs/redisinsight           RedisInsight - The GUI "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Redis                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\nredislabs/redismod               An automated build of redismod - latest Redi…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("                                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ncentos/redis-32-centos7          Redis in-memory data structure store, used a…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\ncircleci/redis                   CircleCI images "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Redis                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("                                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nclearlinux/redis                 Redis key-value data structure server with t…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nrunnable/redis-stunnel           stunnel to redis provided by linking contain…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ntiredofit/redis                  Redis Server w/ Zabbix monitoring and S6 Ove…   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nwodby/redis                      Redis container image with orchestration        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nxetamus/redis-resource           forked redis-resource                           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载最新版本的Redis镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull redis\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br")])]),a("h2",{attrs:{id:"新增挂载配置文件夹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增挂载配置文件夹"}},[s._v("#")]),s._v(" 新增挂载配置文件夹")]),s._v(" "),a("blockquote",[a("p",[s._v("因为 redis 默认配置你会发现只能够本地连接，不能进行远程访问，使用 Redis Desktop Manager连接都会报错，因此需要手动挂载 redis 配置文件/\n新建"),a("code",[s._v("data")]),s._v("和"),a("code",[s._v("conf")]),s._v("两个文件夹，位置随意。例如：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /export/servers/redis/conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /export/servers/redis/data\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"新增redis配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增redis配置文件"}},[s._v("#")]),s._v(" 新增Redis配置文件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /export/servers/redis/conf/redis.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("内容如下：")]),s._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[s._v("#bind 127.0.0.1 \nprotected-mode no\nappendonly yes \nrequirepass root \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("将bind 127.0.0.1注释掉，保证可以从远程访问到该Redis，不单单是从本地")]),s._v(" "),a("li",[s._v("appendonly：开启数据持久化到磁盘，由于开启了磁盘映射，数据最终将落到"),a("code",[s._v("/export/server/redis/data")]),s._v("目录下")]),s._v(" "),a("li",[s._v("requirepass：设置访问密码为root")])]),s._v(" "),a("h2",{attrs:{id:"创建redis容器并启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建redis容器并启动"}},[s._v("#")]),s._v(" 创建redis容器并启动")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --restart"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always --privileged"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(":6379 --name redis "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /export/servers/redis/data:/data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /export/servers/redis/conf/redis.conf:/etc/redis/redis.conf "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d redis redis-server /etc/redis/redis.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("docker run")]),s._v("表示运行的意思")]),s._v(" "),a("li",[a("code",[s._v("--name redis")]),s._v("表示运行容器的名字叫"),a("code",[s._v("redis")])]),s._v(" "),a("li",[a("code",[s._v("-p 6379:6379")]),s._v("表示将服务器的6379（冒号前的6379）端口映射到docker的6379（冒号后的6379）端口，这样就可以通过服务器的端口访问到docker容器的端口了")]),s._v(" "),a("li",[s._v("-d 表示以后台服务的形式运行redis")]),s._v(" "),a("li",[a("code",[s._v("-v /export/servers/redis/data:/data")]),s._v("表示将服务器上的"),a("code",[s._v("/export/server/redis/data")]),s._v("映射为docker容器上的"),a("code",[s._v("/data")]),s._v(" ，这样"),a("code",[s._v("/data")]),s._v("中产生的数据就可以持久化到本地的目录下了")]),s._v(" "),a("li",[a("code",[s._v("-v /export/servers/redis/conf/redis.conf:/etc/redis/redis.conf")]),s._v("表示将本地"),a("code",[s._v("/export/server/redis/conf/redis.conf")]),s._v("映射为docker容器上的"),a("code",[s._v("/etc/redis/redis.conf")]),s._v("，这样再配合指令末尾的"),a("code",[s._v("redis redis-server /etc/redis/redis.conf")]),s._v("实现让docker容器运行时使用本地配置的Redis配置文件的功能了。")]),s._v(" "),a("li",[a("code",[s._v("redis redis-server /etc/redis/redis.conf")]),s._v("表示运行redis服务器程序，并且指定运行时的配置文件")])])])}),[],!1,null,null,null);e.default=n.exports}}]);